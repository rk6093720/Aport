<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> Apartment Details || Aports || Aports HTML 5 Template </title>
    <!-- favicons Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicons/favicon-16x16.png" />
    <link rel="manifest" href="assets/images/favicons/site.webmanifest" />
    <meta name="description" content="Aports HTML 5 Template " />
    <!-- fonts -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/vendors/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/vendors/animate/animate.min.css" />
    <link rel="stylesheet" href="assets/vendors/animate/custom-animate.css" />
    <link rel="stylesheet" href="assets/vendors/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="assets/vendors/jarallax/jarallax.css" />
    <link rel="stylesheet" href="assets/vendors/jquery-magnific-popup/jquery.magnific-popup.css" />
    <link rel="stylesheet" href="assets/vendors/nouislider/nouislider.min.css" />
    <link rel="stylesheet" href="assets/vendors/nouislider/nouislider.pips.css" />
    <link rel="stylesheet" href="assets/vendors/odometer/odometer.min.css" />
    <link rel="stylesheet" href="assets/vendors/swiper/swiper.min.css" />
    <link rel="stylesheet" href="assets/vendors/aports-icons/style.css">
    <link rel="stylesheet" href="assets/vendors/tiny-slider/tiny-slider.min.css" />
    <link rel="stylesheet" href="assets/vendors/reey-font/stylesheet.css" />
    <link rel="stylesheet" href="assets/vendors/owl-carousel/owl.carousel.min.css" />
    <link rel="stylesheet" href="assets/vendors/owl-carousel/owl.theme.default.min.css" />
    <link rel="stylesheet" href="assets/vendors/bxslider/jquery.bxslider.css" />
    <link rel="stylesheet" href="assets/vendors/bootstrap-select/css/bootstrap-select.min.css" />
    <link rel="stylesheet" href="assets/vendors/vegas/vegas.min.css" />
    <link rel="stylesheet" href="assets/vendors/jquery-ui/jquery-ui.css" />
    <link rel="stylesheet" href="assets/vendors/timepicker/timePicker.css" />
    <!-- template styles -->
    <link rel="stylesheet" href="assets/css/aports.css" />
    <link rel="stylesheet" href="assets/css/aports-responsive.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
</head>
<body class="custom-cursor">
    <div class="custom-cursor__cursor"></div>
    <div class="custom-cursor__cursor-two"></div>
    <div class="preloader">
        <div class="preloader__image"></div>
    </div>
     <div class="stricky-header stricked-menu main-menu">
            <div class="sticky-header__content"></div><!-- /.sticky-header__content -->
        </div><!-- /.stricky-header -->
    <!-- /.preloader -->
    <div class="page-wrapper">
       <header class="main-header">
        <nav class="main-menu">
            <div class="main-menu__wrapper">
                <div class="main-menu__wrapper-inner">
                    <div class="main-menu__left">
                        <div class="main-menu__logo">
                            <a href="index.html"><img src="assets/images/resources/logo-1.png" alt=""></a>
                        </div>
                    </div>
                    <div class="main-menu__main-menu-box">
                        <a href="#" class="mobile-nav__toggler"><i class="fa fa-bars"></i></a>
                        <ul class="main-menu__list">
                            <li class="current" class="dropdown" >
                                <a href="./index.html">Home </a>
                            </li>
                            <li class="current" class="dropdown" >
                                <a href="#">Appartments</a>
                                <ul class="shadow-box">
                                    <li><a href="./apartments.html">Apartments</a></li>
                                    <li><a href="./apartment-details.html">Apartment Details</a></li>
                                </ul>
                            </li>
                            <li class="current">
                                <a href="./contact.html">Contact</a>
                            </li>
                            <li class="current">
                                <div class="sessionexpire"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
       </header> 
        
        <!--Page Header Start-->
        <section class="page-header">
            <div class="page-header-bg" style="background-image: url(https://images.pexels.com/photos/6969987/pexels-photo-6969987.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500)">
            </div>
            <div class="container">
                <div class="page-header__inner">
                    <ul class="thm-breadcrumb list-unstyled">
                        <li><a href="index.html">Home</a></li>
                        <li><span>/</span></li>
                        <li>Apartments</li>
                    </ul>
                    <h2>Apartment details</h2>
                </div>
            </div>
        </section>
        <!--Page Header End-->
        <!--Apartment Details Start-->
        <section class="apartment-details">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12" >
                        <div  id="apartment-details-box" class="apartment-details__img-box">
                            <!-- <div class="apartment-details__img">
                                <img src="https://images.pexels.com/photos/6969987/pexels-photo-6969987.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                                <div class="apartment-details__list-box">
                                    <ul class="list-unstyled apartment-details__list">
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>130</h3>
                                                <p>SQUARE AREAS</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>6</h3>
                                                <p>floor</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>3</h3>
                                                <p>Bedrooms</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>3</h3>
                                                <p>bathrooms</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>4</h3>
                                                <p>terrace</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="apartment-details__list-content">
                                                <h3>2</h3>
                                                <p>parkings</p>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div> -->
                        </div>
                        <div class="apartment-details__content-box"> 
                            <button class="button"></button>
                        </div>
                        
                    </div>
                </div>
            </div>
        </section>
        <br>
        <!--Site Footer Start-->
        <footer class="site-footer">
            <div class="site-footer__top">
                <div class="site-footer__shape-1 float-bob-x">
                    <img src="assets/images/shapes/site-footer-shape-1.png" alt="">
                </div>
                <div class="container">
                    <div class="site-footer__top-inner">
                        <div class="row">
                            <div class="col-xl-4 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="100ms">
                                <div class="footer-widget__column footer-widget__about">
                                    <div class="footer-widget__about-text-box">
                                        <p class="footer-widget__about-text">Aports find out all the ways to enjoy
                                            modern and luxury residential life around the world.</p>
                                    </div>
                                    <div class="site-footer__social">
                                        <a href="#"><i class="fab fa-twitter"></i></a>
                                        <a href="#"><i class="fab fa-facebook"></i></a>
                                        <a href="#"><i class="fab fa-pinterest-p"></i></a>
                                        <a href="#"><i class="fab fa-instagram"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-2 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="200ms">
                                <div class="footer-widget__column footer-widget__Explore">
                                    <div class="footer-widget__title-box">
                                        <h3 class="footer-widget__title">Explore</h3>
                                    </div>
                                    <ul class="footer-widget__Explore-list list-unstyled">
                                        <li><a href="about.html">About</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                        <li><a href="about.html">Custom Widget</a></li>
                                        <li><a href="about.html">Shortcodes</a></li>
                                        <li><a href="about.html">Blank page</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="300ms">
                                <div class="footer-widget__column footer-widget__find">
                                    <div class="footer-widget__title-box">
                                        <h3 class="footer-widget__title">Find</h3>
                                    </div>
                                    <p class="footer-widget__find-text">30 Broklyn Golden Street, New <br> York United
                                        States of <br> America</p>
                                </div>
                            </div>
                            <div class="col-xl-3 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="400ms">
                                <div class="footer-widget__column footer-widget__Contact">
                                    <div class="footer-widget__title-box">
                                        <h3 class="footer-widget__title">Contact</h3>
                                    </div>
                                    <ul class="footer-widget__Contact-list list-unstyled">
                                        <li>
                                            <div class="icon">
                                                <span class="fas fa-phone-alt"></span>
                                            </div>
                                            <div class="text">
                                                <p><a href="tel:23425446680">+23 425 4466 80</a></p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="icon">
                                                <span class="fas fa-clock"></span>
                                            </div>
                                            <div class="text">
                                                <p>Mon - Sun: 8AM - 8PM</p>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="icon">
                                                <span class="fas fa-envelope"></span>
                                            </div>
                                            <div class="text">
                                                <p><a href="mailto:needhelp@company.com">needhelp@company.com</a></p>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="site-footer__bottom">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="site-footer__bottom-inner">
                                <p class="site-footer__bottom-text">© All Copyright 2022 by <a href="#">Aports.com</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!--Site Footer End-->
    </div><!-- /.page-wrapper -->
    <div class="mobile-nav__wrapper">
        <div class="mobile-nav__overlay mobile-nav__toggler"></div>
        <!-- /.mobile-nav__overlay -->
        <div class="mobile-nav__content">
            <span class="mobile-nav__close mobile-nav__toggler"><i class="fa fa-times"></i></span>

            <div class="logo-box">
                <a href="index.html" aria-label="logo image"><img src="assets/images/resources/logo-3.png" width="122"
                        alt="" /></a>
            </div>
            <!-- /.logo-box -->
            <div class="mobile-nav__container"></div>
            <!-- /.mobile-nav__container -->
            <ul class="mobile-nav__contact list-unstyled">
                <li>
                    <i class="fa fa-envelope"></i>
                    <a href="mailto:needhelp@packageName__.com">needhelp@agrion.com</a>
                </li>
                <li>
                    <i class="fa fa-phone-alt"></i>
                    <a href="tel:666-888-0000">666 888 0000</a>
                </li>
            </ul><!-- /.mobile-nav__contact -->
            <div class="mobile-nav__top">
                <div class="mobile-nav__social">
                    <a href="#" class="fab fa-twitter"></a>
                    <a href="#" class="fab fa-facebook-square"></a>
                    <a href="#" class="fab fa-pinterest-p"></a>
                    <a href="#" class="fab fa-instagram"></a>
                </div><!-- /.mobile-nav__social -->
            </div><!-- /.mobile-nav__top -->



        </div>
        <!-- /.mobile-nav__content -->
    </div>
    <!-- /.mobile-nav__wrapper -->
    <div class="search-popup">
        <div class="search-popup__overlay search-toggler"></div>
        <!-- /.search-popup__overlay -->
        <div class="search-popup__content">
            <form action="#">
                <label for="search" class="sr-only">search here</label><!-- /.sr-only -->
                <input type="text" id="search" placeholder="Search Here..." />
                <button type="submit" aria-label="search submit" class="thm-btn">
                    <i class="icon-magnifying-glass"></i>
                </button>
            </form>
        </div>
        <!-- /.search-popup__content -->
    </div>
    <!-- /.search-popup -->
    <a href="#" data-target="html" class="scroll-to-target scroll-to-top"><i class="icon-right-arrow"></i></a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="assets/vendors/jquery/jquery-3.6.0.min.js"></script>
    <script src="assets/vendors/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendors/jarallax/jarallax.min.js"></script>
    <script src="assets/vendors/jquery-ajaxchimp/jquery.ajaxchimp.min.js"></script>
    <script src="assets/vendors/jquery-appear/jquery.appear.min.js"></script>
    <script src="assets/vendors/jquery-circle-progress/jquery.circle-progress.min.js"></script>
    <script src="assets/vendors/jquery-magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="assets/vendors/jquery-validate/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendors/nouislider/nouislider.min.js"></script>
    <script src="assets/vendors/odometer/odometer.min.js"></script>
    <script src="assets/vendors/swiper/swiper.min.js"></script>
    <script src="assets/vendors/tiny-slider/tiny-slider.min.js"></script>
    <script src="assets/vendors/wnumb/wNumb.min.js"></script>
    <script src="assets/vendors/wow/wow.js"></script>
    <script src="assets/vendors/isotope/isotope.js"></script>
    <script src="assets/vendors/countdown/countdown.min.js"></script>
    <script src="assets/vendors/owl-carousel/owl.carousel.min.js"></script>
    <script src="assets/vendors/bxslider/jquery.bxslider.min.js"></script>
    <script src="assets/vendors/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script src="assets/vendors/vegas/vegas.min.js"></script>
    <script src="assets/vendors/jquery-ui/jquery-ui.js"></script>
    <script src="assets/vendors/timepicker/timePicker.js"></script>
    <script src="assets/vendors/circleType/jquery.circleType.js"></script>
    <script src="assets/vendors/circleType/jquery.lettering.min.js"></script>
    <!-- template js -->
    <script src="assets/js/aports.js"></script> 
</body>
</html>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const apartmentId = urlParams.get('id');
    console.log('Apartment ID:', apartmentId);
    var btn = document.querySelector(".button");
    btn.classList.add("btn","btn-danger")
    let details;
    var token = JSON.parse(localStorage.getItem("token"));
      if (token && token.token) {
        var expire = token.expire;
        tokenExpire(expire);
    }
       async function getApartmentDetails() {
        let data = await fetch("http://localhost:8080/apartment/read/user",{
               method:"GET",
               headers:{
                Authorization:`Bearer ${token.token}`,
                 "Content-Type":"application/json",
            } 
        });
        let res = await data.json();
        let apartmentData = res.data.getData;
        details = apartmentData.find((item) => item._id === apartmentId);
        displayApartment(details);
    }
    getApartmentDetails();
   //let cartData = localStorage.getItem("Payment",JSON.stringify(details)) || [];
        const base = "http://localhost:8080/";
    let apartmentDetails = document.querySelector(".col-xl-12");
    async function displayApartment(details) {
        apartmentDetails.innerHTML = "";
        if (details) {
            let containerDiv = document.createElement("div");
            containerDiv.setAttribute("class", "apartment-details__img-box");
            let imageDiv = document.createElement("div");
            imageDiv.setAttribute("class", "apartment-details__img");
            let image = document.createElement("img");
            image.src = `${base + details.apartmentImage}`;
            imageDiv.append(image);
            let listDiv = document.createElement("div");
            listDiv.setAttribute("class", "apartment-details__list-box");
            let unorderList = document.createElement("ul");
            unorderList.classList.add("list-unstyled", "apartment-details__list");
            let list = document.createElement("li");
            let divList = document.createElement("div");
            divList.setAttribute("class", "apartment-details__list-content");
            let heading = document.createElement("h3");
            heading.textContent = details.area;
            let text = document.createElement("p");
            text.textContent = "Square-Area";
            let floor = document.createElement("h3");
            floor.textContent = details.floor;
            let floorText = document.createElement("p");
            floorText.textContent = "Floor";
            let bedroom = document.createElement("h3");
            bedroom.textContent = details.bedRooms;
            let bedroomText = document.createElement("p");
            bedroomText.textContent = "Bedrooms";
            let bathRooms = document.createElement("h3");
            bathRooms.textContent = details.bathRooms;
            let bathRoomsText = document.createElement("p");
            bathRoomsText.textContent = "bathrooms";
            let terrace = document.createElement("h3");
            terrace.textContent = details.terrace;
            let terraceText = document.createElement("p");
            terraceText.textContent = "terrace";
            let price = document.createElement("h3");
            price.textContent = "₹"+details.price;
            let priceText = document.createElement("p");
            priceText.textContent = "Price";
            divList.append(heading, text, floor, floorText, bedroom, bedroomText, bathRooms, bathRoomsText, terrace, terraceText, price, priceText);
            list.append(divList);
            unorderList.append(list);
            listDiv.append(unorderList);
            imageDiv.append(listDiv);
            containerDiv.append(imageDiv);
            let contentBox = document.createElement("div");
            contentBox.setAttribute("class", "apartment-details__content-box");
            let header = document.createElement("h3");
            header.setAttribute("class", "apartment-details__content-title");
            header.textContent = details.title;
            let para = document.createElement("p");
            para.setAttribute("class", "apartment-details__text-1");
            para.textContent = details.description;
            let btn = document.createElement("button");
            btn.classList.add("btn", "btn-danger");
            btn.style.marginTop = "20px";
            btn.style.marginLeft = "10px";
            btn.textContent="Request";
            btn.addEventListener("click", async function () {
                 try { 
                const requestId = await getTentant();
                 const payload = {
                        tentantsId: requestId._id,
                        contract: "pending",
                        apartmentId: apartmentId
                    }
                    console.log(requestId)
                const res = await fetch("http://localhost:8080/tentants/notification", {
                        method: "POST",
                        headers: {
                              Authorization:`Bearer ${token.token}`,
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(payload)
                    })
                    const data = await res.json();
                    console.log("contract",data)
                     if (data.status === "failed" && data.contract === "pending") {
                        btn.textContent = data.contract;
                        btn.disabled=true;
                        alert(data.msg)
                    } 
                    else if (data.contract === "completed" && data.status==="success") {
                        btn.textContent = data.contract;
                        btn.classList.add("btn","btn-success")
                        btn.disabled = true;
                        btn.style.display="none"
                         let button2 = document.createElement("button");
                         button2.setAttribute("id","download")
                         button2.classList.add("btn","btn-success")
                         button2.textContent = "Contract Sign";
                         button2.style.marginTop = "20px";
                          button2.style.marginLeft = "10px";
                          button2.addEventListener("click", ()=>{
                            downloadPdf().then(()=>{
                                showGoToCartButton();
                                button2.style.display="none"
                            })
                            .catch(()=>{
                                 console.error("Error signing contract:", error);
                            })
                          });
                            contentBox.appendChild(button2);
                        alert(data.msg);
                        load(); // Call load function after the button text changes
                    }else if(data.status === "success" && data.newNotification.contract === "pending"){
                       btn.textContent= data.newNotification.contract
                        btn.classList.add("btn","btn-danger")
                        btn.disabled = true;
                        alert(data.msg)
                    }
                    else{
                         btn.textContent = "Request";
                        btn.disabled=false;
                    }
                    localStorage.setItem("requestForcontract", JSON.stringify(data));
                } catch (e) {
                    alert(e)
                }
            });
            // Call load function on HTML page load
               async function showGoToCartButton(){
                let cart = document.createElement("button");
                cart.classList.add("btn","btn-primary");
                cart.textContent="Book Apartment";
                cart.style.width="120px";
                cart.style.marginTop = "20px";
                cart.style.marginLeft = "10px";
                cart.addEventListener("click",async()=>{
                    /*
                    setTimeout(()=>{
                         localStorage.setItem("Payment",JSON.stringify(details))
                    window.location.href="./cart.html";
                    },2000)
                    */
                    try{
                        const user = await getTentant()
                        let obj = {
                            tentants_id:user._id,
                            apartment_id:details._id,
                            apartment_details:{
                                image:`${base + details.apartmentImage}`,
                                price:details.price,
                                title:details.title,
                                city:details.city,
                                typeofApartment:details.typeofApartment
                            }
                        }
                        const res = await fetch(`http://localhost:8080/cart/addcart`,{
                            method:"POST",
                            headers:{
                                 Authorization:`Bearer ${token.token}`,
                                "Content-Type":"application/json"
                            },
                            body:JSON.stringify(obj)
                        })
                        const data = await res.json();
                        if(data.status === "success" || data.status === "pending"){  
                            window.location.href="./cart.html"
                        }
                    }catch(e){
                        console.log(e.msg)
                    }
                })
                contentBox.appendChild(cart)
                }
                   async function getTentant() {
                try {
                    const res = await fetch("http://localhost:8080/tentants/read/user",{
                        method:"GET",
                        headers:{
                             Authorization:`Bearer ${token.token}`,
                             "Content-Type":"application/json"
                        }
                    });
                    const data = await res.json();
                    let id = data.Tentant.find((item) => (item._id))
                    return id;
                } catch (e) {
                    alert(e.msg)
                }
            }
            contentBox.append(header, para, btn);
            apartmentDetails.append(containerDiv, contentBox);

        }
    }
    function load() {
           let data =JSON.parse(localStorage.getItem("requestForcontract"));
           //console.log(data.contract)
           if(data.contract === "pending" && data.status === "failed" ){
            btn.textContent = data.contract;
           }else{
             btn.textContent = data.contract;
            btn.classList.add("btn","btn-success")
            btn.style.display="none"
           }
                   
     };
  
async function downloadPdf() {
    try {
        const res = await fetch("http://localhost:8080/landlord/read", {
            method: "GET",
            headers: {
                Authorization: `Bearer ${token.token}`
            }
        });
        if (!res.ok) {
            throw new Error(`Failed to fetch PDF file. Status: ${res.status}`);
        }
        const data = await res.json();
        const contractPdf = data.Landlords.find((item) => item.document);
        if (!contractPdf) {
            throw new Error("PDF document not found in the response data.");
        }
        const pdfUrl = `http://localhost:8080/${contractPdf.document}`;
         // Fetch PDF content as ArrayBuffer
        const pdfResponse = await fetch(pdfUrl);
        const pdfBuffer = await pdfResponse.arrayBuffer();
        // Create a blob from the PDF content
        console.log("pdfbuffer",pdfBuffer)
        const pdfBlob = new Blob([pdfBuffer], { type: 'application/pdf' });
           console.log("pdfblob",pdfBlob)
        // Create a URL for the blob
        const pdfBlobUrl = URL.createObjectURL(pdfBlob);
        // Create a temporary anchor element
        const tempAnchor = document.createElement('a');
        tempAnchor.href = pdfBlobUrl;
        tempAnchor.setAttribute('download', 'contract.pdf');
        tempAnchor.style.display = 'none';
        document.body.appendChild(tempAnchor);
        // Trigger click event on the anchor
        tempAnchor.click();
        // Clean up
        document.body.removeChild(tempAnchor);
        URL.revokeObjectURL(pdfBlobUrl);
        alert("PDF document is downloaded successfully");
    } catch (error) {
        alert(`Error: ${error.message}`);
    }
}
function tokenExpire(expire) {
   const token = new Date(expire);
const interval = setInterval(() => {
    const currentTime = Math.floor(Date.now() / 1000); // Current time in seconds
    const difference = (token - currentTime) ; // Difference in seconds
    if (difference <= 0) {
        clearInterval(interval);
        document.querySelector(".sessionexpire").innerText = "Token expired";
           setTimeout(()=>{
            window.location.href="./login.html";
           },5000)
        return;
    }
    const hours = Math.floor(difference / 3600);
    const minutes = Math.floor((difference % 3600) / 60);
    const seconds = Math.floor(difference % 60);
    // Format the expiration time
    document.querySelector(".sessionexpire").innerText =`${hours < 10 ? "0" + hours : hours}:${minutes < 10 ? "0" + minutes : minutes}:${seconds < 10 ? "0" + seconds : seconds}`;
}, 1000);

    // Calculate hours, minutes, and seconds
}

window.onload = load();
</script>